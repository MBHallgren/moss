<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Microbial Outbreak Surveillance System 1.0</title>
    <link rel="stylesheet" href="../css/styles.css">
    <script src="../js/basecalling.js" type="text/javascript"></script>
</head>


  <body>
  <!-- Side navigation -->
  <div class="sidenav" id="mySidebar">
      <a href="./index.html" id>Guide</a>
      <a href="./services.html">Services</a>
      <a href="./analytics.html">Analytics</a>
      <!-- <a href="./database.html">Database</a> -->
      <a href="./dashboard.html">Dashboard</a>
      <a href="./config.html">Config</a>
      <a href="./results.html">Results</a>
    <a href="./basecalling.html">Base Calling</a>
      <a href="./update.html">Update</a>
  </div>
  <!-- Page content https://www.who.int/news/item/27-02-2017-who-publishes-list-of-bacteria-for-which-new-antibiotics-are-urgently-needed https://www.cdc.gov/drugresistance/biggest-threats.html  -->


  <div class="main" id="main">
    <main data-router-wrapper>
      <section data-router-view="Guide" class="Guide">
        <div class="Guide-content">
            <div class ="Guide-presentation">
                <h1>Base calling with Guppy 5.0.16</h1></div>
            <div class ="Guide-presentation" hidden>
                <h1>Generate a metadata sheet for analysis</h1>

                Your current system configuration is:

                <pre id="current-config"></pre>
                <div hidden>
                    MOSS path: <pre id="current-exepath"></pre>

                </div>
            </div>

            <div class="MOSS-arguments" id="MOSS-arguments">
                <b>NB: Base calling is only available on ubuntu machines with NVIDIA GPUs!  </b>
              <br><br>
                <div class="generate-metadata-sheet" id="generate-metadata-sheet">
                    <div class="base-call-fast5-section" id="base-call-fast5-section">
                        <form action="/action_page.php">
                            Select directory containing Fast5 files:
                            <input type="file" id="fast5-input-field" name="fast5-input-field" webkitdirectory directory multiple value="" onchange="select_output();"><br> <br>
                            Enter the complete path to the output directory, where you wish for the FASTQ's to be placed (I.e. '(/home/usr/data/fastq/')
                            <input type="text" id="output-field" name="output-field" value=""><br><br>
                            Flow-cell type:
                            <select name="flow-cell" id="flow-cell">
                              </select>
                            <br><br>
                            Nanopore kit:
                            <select name="kit" id="kit">
                              </select> <br><br>
                            Demultiplex (barcodes):
                            <select name="demux" id="demux">
                              </select> <br><br>
                            <div hidden>
                            Barcoding config_name:
                            <select name="barcoding_config_name" id="barcoding_config_name">
                              </select> <br><br>
                            Model version:
                            <select name="model_version" id="model_version">
                              </select> <br><br>
                            </div>
                            <button type="button" id="start-base-calling-button" onclick="start_base_calling()">Start Base Calling</button>

                        </form>
                        <pre id="metadata-sheet-msg"></pre>
                        <div hidden>
                            <pre id="workflowjson"></pre>

                        </div>

                        <div class="loader" id="loader">
                          </div>
                          <pre id="loadermessage"></pre>
                    </div>
                </div>
        </div>

      </section>
    </main>
  </div>

  <script type="text/javascript">
      document.getElementById('upload-config-file').addEventListener('change', readSingleFile, false);
  </script>
  </body>
</html>
